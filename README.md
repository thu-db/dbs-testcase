# DBS-Testcase

## 使用说明

部分测例会有 `flag` 标记，表明该测例只有给出 flag 后才会显式地启动该测例。注意，为了简化本地测试时的 flag 输入，我们统一约定一旦启用了某个测例的 flag，则它的依赖测例及其递归的所有间接依赖测例全都会被启用。

## 数据说明

注意，由于评测器的设计问题，测例有一些需要考虑的约定：

1. 使用 `ORDER BY` 时，应该将排序字段也输出到结果中，否则评测器会因为无法判定该部分的有序性而直接视为结果正确。例如 `SELECT name FROM T ORDER BY id`，评测器得到的参考答案和用户输出都只有一列 `name`，那么评测器只能认为所有行的 `id` 都是一样的，用户以任意顺序输出均为正确。
2. 主外键的创建不应该与显式索引有冲突，否则很难规定 DESC 的显示内容。
3. 插入的数据中最好不要包含 `@` 符号，如果包含最好不要是字符串的第一个字符，如果是则绝不能有查询使得 `@` 出现在行首，否则这会被评测器识别为输出内容结束的标志。

## 标程说明

附带了 `std/main.py` 作为借用 MySQL 跑测例的标程，附带的第三方库放在 `std/requirements.txt` 中，可以用于生成答案，参考运行方式如下：

```bash
python runner.py --std -f [flags, ...] -- python std/main.py <args...>
```

## TODO

以下是优先级不高，可能在将来学期完成的内容：

- 用 `logger` 库重构输出
