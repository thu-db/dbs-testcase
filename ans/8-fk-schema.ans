@USE DB2;

@CREATE TABLE TX (ID INT, VALUE INT, PRIMARY KEY (ID));

@CREATE TABLE TY (ID INT, ID_TX INT, VALUE INT);

@INSERT INTO TX VALUES (1, 1), (2, 2), (3, 3), (4, 4);

@INSERT INTO TY VALUES (1, 1, 1), (2, 2, 2), (3, 6, 9);

!ERROR
foreign
@ALTER TABLE TY ADD CONSTRAINT FK_ID_TX FOREIGN KEY (ID_TX) REFERENCES TX(ID);

@DELETE FROM TY WHERE VALUE > 5;

@ALTER TABLE TY ADD CONSTRAINT FK_ID_TX FOREIGN KEY (ID_TX) REFERENCES TX(ID);

Field,Type,Null,Default
ID,INT,YES,NULL
ID_TX,INT,YES,NULL
VALUE,INT,YES,NULL

FOREIGN KEY (ID_TX) REFERENCES TX(ID);
@DESC TY;

!ERROR
foreign
@INSERT INTO TY VALUES (4, 8, 12);

!ERROR
foreign
@DELETE FROM TX WHERE ID = 1;

@ALTER TABLE TY DROP FOREIGN KEY FK_ID_TX;

@DELETE FROM TX WHERE ID = 1;

@INSERT INTO TY VALUES (4, 8, 12);

ID,VALUE
2,2
3,3
4,4
@SELECT * FROM TX;

ID,ID_TX,VALUE
1,1,1
2,2,2
4,8,12
@SELECT * FROM TY;

Field,Type,Null,Default
ID,INT,YES,NULL
ID_TX,INT,YES,NULL
VALUE,INT,YES,NULL

INDEX (ID_TX)
@DESC TY;

